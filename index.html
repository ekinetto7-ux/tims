<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TIMS風 次駅表示</title>

<style>
  body {
    margin: 0;
    background: #111;
    color: #fff;
    font-family: sans-serif;
  }

  .screen {
    position: absolute;
    inset: 0;
    padding: 20px;
  }

  .hidden {
    display: none;
  }

  /* メイン画面 */
  #mainScreen {
    background: #000;
  }

  #currentStation {
    font-size: 32px;
    margin-bottom: 10px;
  }

  #nextStation {
    font-size: 22px;
    color: #7fbfff;
  }

  /* 右下ボタン */
  #bottom-buttons {
    position: absolute;
    right: 20px;
    bottom: 20px;
    display: flex;
    gap: 10px;
  }

  /* ボタン共通 */
  button {
    background: #2f5f9e;
    color: #fff;
    border: 1px solid #9fc3ff;
    padding: 8px 16px;
    font-size: 16px;
    border-radius: 3px;
  }

  button:active {
    background: #1e3f6f;
  }

  button:disabled {
    background: #555;
    border-color: #777;
    color: #aaa;
  }

  /* 設定画面 */
  #settingScreen {
    background: #111;
  }

  .setting-buttons {
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 20px;
  }

  .big {
    width: 200px;
    height: 60px;
    font-size: 22px;
  }
</style>
</head>

<body>

<!-- 効果音 -->
<audio id="clickSound" src="click.mp3" preload="auto"></audio>

<!-- メイン画面 -->
<div id="mainScreen" class="screen">
  <div id="currentStation"></div>
  <div id="nextStation"></div>

  <div id="bottom-buttons">
    <button id="settingBtn">設定</button>
  </div>
</div>

<!-- 設定画面（文章なし） -->
<div id="settingScreen" class="screen hidden">
  <div class="setting-buttons">
    <button id="selectNextStation" class="big">次駅</button>
    <button id="confirmBtn" class="big">確認</button>
  </div>
</div>

<script>
/* ===== データ ===== */
const stations = [
  "君津",
  "木更津",
  "袖ヶ浦",
  "長浦",
  "姉ヶ崎",
  "五井",
  "八幡宿",
  "浜野",
  "蘇我",
  "本千葉",
  "千葉",
  "津田沼",
  "船橋",
  "市川",
  "新小岩",
  "錦糸町",
  "新日本橋",
  "東京"
];

let currentIndex = 0;
let pendingAction = null;

/* ===== 要素 ===== */
const currentStationEl = document.getElementById("currentStation");
const nextStationEl = document.getElementById("nextStation");
const mainScreen = document.getElementById("mainScreen");
const settingScreen = document.getElementById("settingScreen");
const selectNextStationBtn = document.getElementById("selectNextStation");

/* ===== 表示更新 ===== */
function updateDisplay() {
  currentStationEl.textContent = "現在駅：" + stations[currentIndex];

  if (currentIndex < stations.length - 1) {
    nextStationEl.textContent = "次駅：" + stations[currentIndex + 1];
  } else {
    nextStationEl.textContent = "終点";
  }
}

/* ===== 次駅ボタン有効制御 ===== */
function updateNextButtonState() {
  if (currentIndex >= stations.length - 1) {
    selectNextStationBtn.disabled = true;
  } else {
    selectNextStationBtn.disabled = false;
  }
}

/* ===== 画面切替 ===== */
function showMain() {
  settingScreen.classList.add("hidden");
  mainScreen.classList.remove("hidden");
}

function showSetting() {
  updateNextButtonState();
  mainScreen.classList.add("hidden");
  settingScreen.classList.remove("hidden");
}

/* ===== 処理 ===== */
function goNextStation() {
  if (currentIndex < stations.length - 1) {
    currentIndex++;
    updateDisplay();
  }
}

/* ===== 音（全ボタン共通） ===== */
function playClickSound() {
  const sound = document.getElementById("clickSound");
  sound.currentTime = 0;
  sound.play();
}

/* ===== イベント ===== */
document.getElementById("settingBtn").onclick = () => {
  showSetting();
};

selectNextStationBtn.onclick = () => {
  pendingAction = "next";
};

document.getElementById("confirmBtn").onclick = () => {
  if (pendingAction === "next") {
    goNextStation();
  }
  pendingAction = null;
  showMain();
};

/* 全ボタンで音 */
document.querySelectorAll("button").forEach(btn => {
  btn.addEventListener("click", () => {
    if (!btn.disabled) playClickSound();
  });
});

/* 初期表示 */
updateDisplay();
</script>

</body>
</html>
