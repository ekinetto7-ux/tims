<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TIMS</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    background: black;
    color: white;
    font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial;
    height: 100%;
  }

  .screen {
    display: none;
    width: 100%;
    height: 100%;
  }

  .title {
    text-align: center;
    font-size: 26px;
    margin-top: 30px;
  }

  button {
    font-size: 18px;
    padding: 12px 26px;
    border-radius: 20px;
    border: none;
  }

  .home-btn {
    width: 220px;
    margin: 12px auto;
    display: block;
  }

  .back-btn {
    background: #ddd;
  }

  /* ===== 初期画面 ===== */
  #home {
    display: block;
    padding-top: 80px;
  }

  /* ===== 運転情報 ===== */
  #drive-screen {
    padding-top: 30px;
  }

  /* ===== ATS ===== */
  #ats-screen {
    padding-top: 20px;
    text-align: center;
  }

  .ats-diagram {
    width: 200px;
    height: 80px;
    border: 2px solid white;
    margin: 20px auto;
    line-height: 80px;
    font-size: 20px;
  }

  .ats-green {
    background: green;
  }

  .ats-red {
    background: red;
  }

</style>
</head>
<body>

<!-- ===== 初期選択画面 ===== -->
<div id="home" class="screen">
  <button class="home-btn" onclick="openDrive()">運転情報</button>
  <button class="home-btn" onclick="openATS()">ATS</button>
</div>

<!-- ===== 運転情報画面 ===== -->
<div id="drive-screen" class="screen">
  <div class="title">運転情報</div>

  <!-- 指令表示 -->
  <div style="margin-top:30px; text-align:center; color:yellow; font-size:20px;">
    寝台サンライズ瀬戸・出雲<br>運転見合わせ
  </div>

  <!-- 次駅表示 -->
  <div style="margin-top:40px; text-align:center; font-size:34px; color:yellow; font-weight:bold;">
    次駅表示
  </div>

  <!-- ATS 図（下側・干渉しない） -->
  <div class="ats-diagram" id="drive-ats-diagram"></div>

  <div style="text-align:center; margin-top:40px;">
    <button class="back-btn" onclick="goHome()">戻る</button>
  </div>
</div>

<!-- ===== ATS画面 ===== -->
<div id="ats-screen" class="screen">
  <div class="title">ATS</div>

  <!-- 図（上・大きめ） -->
  <div class="ats-diagram" id="ats-diagram"></div>

  <button class="home-btn" onclick="setATS('open')">ATS開放</button>
  <button class="home-btn" onclick="setATS('emergency')">ATS非常</button>
  <button class="home-btn" onclick="setATS('p')">ATS-P</button>
  <button class="home-btn" onclick="setATS('reset')">機器開放</button>

  <div style="margin-top:30px;">
    <button class="back-btn" onclick="goHome()">戻る</button>
  </div>
</div>

<script>
  const screens = ["home", "drive-screen", "ats-screen"];
  const atsDiagram = () => document.getElementById("ats-diagram");
  const driveATSDiagram = () => document.getElementById("drive-ats-diagram");

  function show(id) {
    screens.forEach(s => document.getElementById(s).style.display = "none");
    document.getElementById(id).style.display = "block";
  }

  function goHome() {
    show("home");
  }

  function openDrive() {
    show("drive-screen");
  }

  function openATS() {
    show("ats-screen");
  }

  function resetDiagram() {
    atsDiagram().className = "ats-diagram";
    driveATSDiagram().className = "ats-diagram";
    atsDiagram().innerText = "";
    driveATSDiagram().innerText = "";
  }

  function setATS(type) {
    resetDiagram();

    if (type === "open") {
      atsDiagram().classList.add("ats-green");
      atsDiagram().innerText = "ATS開放";
      driveATSDiagram().classList.add("ats-green");
      driveATSDiagram().innerText = "ATS開放";
    }

    if (type === "p") {
      atsDiagram().classList.add("ats-green");
      atsDiagram().innerText = "ATS-P";
      driveATSDiagram().classList.add("ats-green");
      driveATSDiagram().innerText = "ATS-P";
    }

    if (type === "emergency") {
      atsDiagram().classList.add("ats-red");
      atsDiagram().innerText = "ATS非常";
      driveATSDiagram().classList.add("ats-red");
      driveATSDiagram().innerText = "ATS非常";
    }

    if (type === "reset") {
      resetDiagram();
    }
  }
</script>

</body>
</html>
