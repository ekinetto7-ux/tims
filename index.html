<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>列車シミュレーター</title>
<style>
body{margin:0;background:#000;color:#fff;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif}
.top{padding:8px 16px;border-bottom:2px solid #222}
.line{font-size:14px;color:#9ad}
.next{display:flex;align-items:center;font-size:28px;margin-top:6px}
.next .label{color:#ffd400;margin-right:8px}
.next .station{color:#fff}
.stations{margin-top:10px;white-space:nowrap;overflow:hidden}
.stations span{display:inline-block;margin-right:16px;color:#fff;font-size:18px}
.controls{position:fixed;bottom:16px;left:0;right:0;display:flex;justify-content:space-around}
button{font-size:22px;padding:16px 24px;border:none;border-radius:8px}
#nextBtn{background:#333;color:#fff}
#emergencyBtn{background:#c00;color:#fff}
#overlay{position:fixed;inset:0;background:rgba(0,0,0,.9);display:none;flex-direction:column;justify-content:center;align-items:center}
#overlay button{margin:8px}
.role{font-size:12px;color:#aaa;margin-top:4px}
</style>
</head>
<body>

<div class="top">
  <div class="line">内房線・総武快速線</div>
  <div class="next">
    <span class="label">次</span>
    <span id="nextStation" class="station"></span>
  </div>
  <div class="role">運転士／車掌</div>
  <div class="stations" id="stationList"></div>
</div>

<div class="controls">
  <button id="nextBtn">次駅</button>
  <button id="emergencyBtn">非常</button>
</div>

<div id="overlay">
  <button onclick="triggerEmergency('地震')">地震</button>
  <button onclick="triggerEmergency('火災')">火災</button>
  <button onclick="triggerEmergency('人身事故')">人身事故</button>
</div>

<script>
const stations=[
"君津","木更津","袖ヶ浦","長浦","姉ヶ崎","五井","八幡宿","浜野",
"蘇我","本千葉","千葉","津田沼","船橋","市川","新小岩","馬喰町",
"錦糸町","新日本橋","東京"
];
let index=0;
let passToggle=false;
const nextEl=document.getElementById("nextStation");
const listEl=document.getElementById("stationList");

function render(){
  nextEl.textContent=stations[index]||"終点";
  listEl.innerHTML="";
  for(let i=index;i<index+3 && i<stations.length;i++){
    const s=document.createElement("span");
    s.textContent=stations[i];
    listEl.appendChild(s);
  }
}
render();

document.getElementById("nextBtn").onclick=()=>{
  if(passToggle){
    index++;
    passToggle=false;
  }else{
    passToggle=true;
  }
  render();
};

document.getElementById("emergencyBtn").onclick=()=>{
  document.getElementById("overlay").style.display="flex";
};

function triggerEmergency(type){
  let text="";
  if(type==="地震"){
    text="直ちに高台に避難、車掌と連携";
  }
  if(type==="火災"){
    text="すべての窓を閉めること。トンネル内停車を避けること";
  }
  if(type==="人身事故"){
    text="ただちに運転士・車掌・指令・警察・消防に連絡すること";
  }
  alert("非常："+type+"\n"+text);
  document.getElementById("overlay").style.display="none";
}
</script>
</body>
</html>
