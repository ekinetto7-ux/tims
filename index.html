<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TIMS シミュレーター</title>

<style>
body {
  background: #000;
  color: #0ff;
  font-family: sans-serif;
  margin: 0;
  padding: 10px;
}

.panel {
  border: 2px solid #0ff;
  padding: 10px;
  margin-bottom: 10px;
}

.buttons {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.tims-btn {
  border: 2px solid #4aa3ff;
  padding: 10px 16px;
  cursor: pointer;
  user-select: none;
  text-align: center;
}

.tims-btn:active {
  background: white;
  color: black;
}

#status {
  font-size: 18px;
  margin-bottom: 5px;
}

#speed {
  font-size: 16px;
}

#arrow {
  font-size: 30px;
  color: yellow;
}

.hidden {
  display: none;
}

/* ドアカット */
#doorPanel {
  margin-top: 10px;
}

#train {
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
}

.car {
  width: 30px;
  height: 40px;
  border: 2px solid #0ff;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.car.sub {
  border-color: #aaa;
}

.car.active {
  background: yellow;
  color: black;
}
</style>
</head>

<body>

<div class="panel">
  <div class="buttons">
    <div class="tims-btn" id="driverBtn">運転士</div>
    <div class="tims-btn" id="conductorBtn">車掌</div>
    <div class="tims-btn" id="nextBtn">次の駅</div>
    <div class="tims-btn" id="doorBtn">ドアカット</div>
  </div>
</div>

<div class="panel">
  <div id="status">運転士モード</div>
  <div id="speed">0 km/h</div>
  <div id="arrow" class="hidden">▶</div>
</div>

<div class="panel hidden" id="doorPanel">
  <div>15両編成（基本11＋付属4）</div>
  <div id="train"></div>
</div>

<script>
let mode = "driver";
let running = false;
let arrived = false;

const status = document.getElementById("status");
const speed = document.getElementById("speed");
const arrow = document.getElementById("arrow");

const driverBtn = document.getElementById("driverBtn");
const conductorBtn = document.getElementById("conductorBtn");
const nextBtn = document.getElementById("nextBtn");
const doorBtn = document.getElementById("doorBtn");
const doorPanel = document.getElementById("doorPanel");

/* 初期 */
driverBtn.style.borderColor = "yellow";

/* モード切替 */
driverBtn.onclick = () => {
  mode = "driver";
  status.textContent = "運転士モード";
  driverBtn.style.borderColor = "yellow";
  conductorBtn.style.borderColor = "#4aa3ff";
};

conductorBtn.onclick = () => {
  mode = "conductor";
  status.textContent = "車掌モード";
  conductorBtn.style.borderColor = "yellow";
  driverBtn.style.borderColor = "#4aa3ff";
};

/* 次の駅（運転士のみ） */
nextBtn.onclick = () => {
  if (mode !== "driver") {
    status.textContent = "※ 車掌モードでは操作不可";
    return;
  }

  if (!running) {
    running = true;
    arrived = false;
    status.textContent = "走行中";
    speed.textContent = "90 km/h";
    arrow.classList.remove("hidden");
  } else if (!arrived) {
    running = false;
    arrived = true;
    speed.textContent = "0 km/h";
    arrow.classList.add("hidden");
    status.textContent = "千葉駅 到着（総武快速線・快速）";
  }
};

/* ドアカット（車掌のみ） */
doorBtn.onclick = () => {
  if (mode !== "conductor") {
    status.textContent = "※ 運転士モードでは操作不可";
    return;
  }
  doorPanel.classList.toggle("hidden");
};

/* 編成表示 15両 */
const train = document.getElementById("train");
for (let i = 1; i <= 15; i++) {
  const car = document.createElement("div");
  car.textContent = i;
  car.className = "car" + (i > 11 ? " sub" : "");
  car.onclick = () => car.classList.toggle("active");
  train.appendChild(car);
}
</script>

</body>
</html>
